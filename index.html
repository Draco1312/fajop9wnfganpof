<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Show image if it exists</title>
  <style>
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial; padding: 24px; background:#f7f8fb; color:#111 }
    h1 { font-size: 20px; margin-bottom: 8px; }
    .card { background: white; padding: 16px; border-radius: 10px; box-shadow: 0 6px 18px rgba(20,30,60,0.06); max-width:760px; }
    .img-wrap { display:inline-block; margin:8px; text-align:center; width:200px; vertical-align:top; }
    .img-wrap img { max-width:100%; height:auto; border-radius:8px; display:block; margin-bottom:6px; }
    .muted { color:#666; font-size:13px; }
    .placeholder { width:200px; height:130px; display:flex; align-items:center; justify-content:center; border-radius:8px; background:#eef2ff; color:#556; }
    button { margin-top:12px; padding:8px 12px; border-radius:8px; border:1px solid #cbd5e1; background:#fff; cursor:pointer; }
  </style>
</head>
<body>
  <div class="card">
    <h1>Show image if file exists</h1>
    <p class="muted">Put the image file(s) in the same folder as this HTML file and update the filenames below if needed.</p>

    <!-- EXAMPLE A: single image with fallback -->
    <section>
      <h3>Single image (with fallback)</h3>
      <div id="singleContainer" class="img-wrap">
        <!-- JS will populate this -->
      </div>
      <button id="checkSingle">Check single image</button>
    </section>

    <hr/>

    <!-- EXAMPLE B: multiple candidate filenames -->
    <section>
      <h3>Multiple candidates (only show the ones that exist)</h3>
      <div id="multiContainer"></div>
      <button id="checkMulti">Check multiple images</button>
    </section>
  </div>

  <script>
    // Utility: test whether a given image URL loads successfully.
    // Returns a Promise that resolves { ok: true, url } on load or { ok: false, url } on error.
    function testImage(url, timeoutMs = 7000) {
      return new Promise((resolve) => {
        const img = new Image();
        let finished = false;
        const timer = setTimeout(() => {
          if (finished) return;
          finished = true;
          img.src = ""; // stop trying
          resolve({ ok: false, url, reason: 'timeout' });
        }, timeoutMs);

        img.onload = () => {
          if (finished) return;
          finished = true;
          clearTimeout(timer);
          resolve({ ok: true, url });
        };
        img.onerror = () => {
          if (finished) return;
          finished = true;
          clearTimeout(timer);
          resolve({ ok: false, url, reason: 'error' });
        };

        // Start loading. For files in the same folder, just the filename is enough:
        img.src = url;
      });
    }

    // ---------- Example A: single image with fallback ----------
    // Change this to the filename you expect in the folder, e.g. "myphoto.jpg"
    const singleFilename = 'example.jpg'; // <- change as needed

    async function checkSingleImage() {
      const container = document.getElementById('singleContainer');
      container.innerHTML = ''; // clear
      const result = await testImage(singleFilename);

      if (result.ok) {
        // show the image
        const el = document.createElement('img');
        el.src = result.url;
        el.alt = singleFilename;
        container.appendChild(el);
        const label = document.createElement('div');
        label.className = 'muted';
        label.textContent = `Loaded: ${singleFilename}`;
        container.appendChild(label);
      } else {
        // show a placeholder / message
        const ph = document.createElement('div');
        ph.className = 'placeholder';
        ph.textContent = `No file named "${singleFilename}" found`;
        container.appendChild(ph);
        const label = document.createElement('div');
        label.className = 'muted';
        label.textContent = `Tried: ${singleFilename} â€” ${result.reason || 'not found'}`;
        container.appendChild(label);
      }
    }

    // ---------- Example B: multiple candidate filenames ----------
    // Put the filenames you want to test here. Browser cannot list folder contents,
    // so you must provide the candidate names.
    const candidates = [
      'photo.jpg',
      'photo.png',
      'picture.webp',
      'example.jpg',   // example includes same name as single to demonstrate
      'notthere.jpg'
    ];

    async function checkMultiple() {
      const container = document.getElementById('multiContainer');
      container.innerHTML = ''; // clear
      const checks = candidates.map((c) => testImage(c));
      // wait for all (they'll resolve true/false individually)
      const results = await Promise.all(checks);

      const found = results.filter(r => r.ok);
      if (found.length === 0) {
        const msg = document.createElement('div');
        msg.className = 'muted';
        msg.textContent = 'No candidate images were found in this folder.';
        container.appendChild(msg);
        return;
      }

      // Show each found image
      found.forEach(r => {
        const wrap = document.createElement('div');
        wrap.className = 'img-wrap';
        const img = document.createElement('img');
        img.src = r.url;
        img.alt = r.url;
        wrap.appendChild(img);
        const caption = document.createElement('div');
        caption.className = 'muted';
        caption.textContent = r.url;
        wrap.appendChild(caption);
        container.appendChild(wrap);
      });
    }

    // wire up buttons
    document.getElementById('checkSingle').addEventListener('click', checkSingleImage);
    document.getElementById('checkMulti').addEventListener('click', checkMultiple);

    // optionally run checks automatically on load:
    // checkSingleImage();
    // checkMultiple();
  </script>
</body>
</html>
